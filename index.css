
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Core Variable Definitions */
@layer base {
  :root {
    --sat: env(safe-area-inset-top, 0px);
    --sab: env(safe-area-inset-bottom, 0px);
    --header-base: 3.5rem;
    --app-controls-bar-base: 3.5rem;
    --header-h: calc(var(--header-base) + var(--sat));
    --app-controls-bar-h: calc(var(--app-controls-bar-base) + var(--sab));
    --sidebar-w: 300px;
    
    /* Jalur Gemilang Light Mode Palette */
    --color-primary-bg: #FFFFFF;
    --color-secondary-bg: #F0F4FF; /* Subtle Royal Blue tint */
    --color-text-primary: #0032A0; /* Royal Blue text */
    --color-text-secondary: #444444;
    --color-text-soft: #666666;
    
    --lattice-glow: 0 0 10px rgba(0, 50, 160, 0.2);
  }

  .dark {
    --color-primary-bg: #0A0A0B;
    --color-secondary-bg: #121214;
    --color-text-primary: #F0F0F0;
    --color-text-secondary: #A0A0A0;
    --color-text-soft: #666666;
    
    --lattice-glow: 0 0 20px rgba(255, 204, 0, 0.4);
  }

  @media (min-width: 640px) {
    :root {
      --header-base: 4rem;
      --app-controls-bar-base: 4rem;
    }
  }
}

body { 
  @apply antialiased overflow-hidden select-none;
  background-color: var(--color-primary-bg);
  color: var(--color-text-primary);
  height: 100dvh;
  width: 100vw;
  position: fixed;
  font-family: 'Inter', sans-serif;
  transition: background-color 0.4s cubic-bezier(0.16, 1, 0.3, 1), color 0.4s cubic-bezier(0.16, 1, 0.3, 1);
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
}

#root { 
  height: 100dvh; 
  width: 100vw; 
  overflow: hidden; 
  display: flex;
  flex-direction: column;
  contain: layout;
}

/* UI Elements */
.panel-header-with-glow {
  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
  will-change: transform;
}

/* Light mode specific: Top bar border in Royal Blue */
:root:not(.dark) .panel-header-with-glow::after {
  content: '';
  position: absolute;
  bottom: -1px;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, #FFCC00, transparent);
  box-shadow: 0 0 10px #FFCC00;
  opacity: 0.8;
}

.dark .panel-header-with-glow::after {
  content: '';
  position: absolute;
  bottom: -1px;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, #FFCC00, transparent);
  box-shadow: 0 0 10px #FFCC00;
  opacity: 0.6;
}

.app-controls-bar-with-glow {
  box-shadow: 0 -4px 30px rgba(0, 0, 0, 0.1);
  will-change: transform;
}

.dark .app-controls-bar-with-glow::before {
  content: '';
  position: absolute;
  top: -1px;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, #FFCC00, transparent);
  box-shadow: 0 0 10px #FFCC00;
  opacity: 0.6;
}

/* Animations & Visual FX */
@keyframes scan {
  0% { top: -10% }
  100% { top: 110% }
}
.animate-scan { animation: scan 2s linear infinite; }

.custom-scrollbar::-webkit-scrollbar { width: 3px; height: 3px; }
.custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
.custom-scrollbar::-webkit-scrollbar-thumb { @apply bg-brandBlue/10 dark:bg-brandYellow/10 rounded-full; }
.no-scrollbar::-webkit-scrollbar { display: none; }

.mask-gradient-right {
  mask-image: linear-gradient(to right, black 85%, transparent 100%);
}

/* PERFORMANCE OPTIMIZATIONS: Content Visibility & Containment */
/* Speed Optimization 5: Intelligent Lazy Rendering */
aside, section, .history-item, .preset-category {
  content-visibility: auto;
  contain-intrinsic-size: 1px 100px;
  contain: content;
}

/* Performance Optimized Canvas Stages */
.canvas-stage {
  will-change: transform, box-shadow;
  transition: box-shadow 0.5s cubic-bezier(0.16, 1, 0.3, 1), border-color 0.5s cubic-bezier(0.16, 1, 0.3, 1);
  contain: paint;
}

/* Layer optimization for high-density components */
main, aside {
  content-visibility: auto;
}

/* Utility Neon Glows */
.shadow-neon-yellow {
  box-shadow: 0 0 5px rgba(255, 204, 0, 0.7), 0 0 15px rgba(255, 204, 0, 0.4);
}
.shadow-neon-red {
  box-shadow: 0 0 5px rgba(204, 0, 1, 0.7), 0 0 15px rgba(204, 0, 1, 0.4);
}
